{"ast":null,"code":"import _slicedToArray from\"/home/grem15/Code/StrangersThings/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import APIFetch from'./api';import Message from'./Message';import MessageForm from'./MessageForm';import PostForm from'./PostForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Post=function Post(props){var post=props.post;var token=props.token;var fetchPosts=props.fetchPosts;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMessages=_useState2[0],setShowMessages=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showEdit=_useState4[0],setShowEdit=_useState4[1];var deletePost=function deletePost(){Promise.all([APIFetch({url:\"posts/\"+post._id+\"/\",method:\"DELETE\",token:token})]).then(function(){fetchPosts();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"Post\",children:[post.title?/*#__PURE__*/_jsx(\"h2\",{children:post.title}):null,post.author.username?/*#__PURE__*/_jsxs(\"p\",{children:[\"Seller: \",post.author.username]}):null,post.description?/*#__PURE__*/_jsx(\"p\",{children:post.description}):null,post.price?/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",post.price]}):null,post.location?/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",post.location]}):/*#__PURE__*/_jsx(\"p\",{children:\"Location: [On Request]\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Will Deliver: \",post.willDeliver?\"Yes\":\"No\"]}),post.createdAt?/*#__PURE__*/_jsxs(\"p\",{children:[\"Created: \",post.createdAt]}):null,post.updatedAt?/*#__PURE__*/_jsxs(\"p\",{children:[\"Last updated: \",post.updatedAt]}):null,post.messages.length!==0?/*#__PURE__*/_jsxs(\"p\",{children:[\"Messages: \",post.messages.length]}):null,post.isAuthor?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setShowEdit(!showEdit);},children:\"Edit\"}),showEdit?/*#__PURE__*/_jsx(PostForm,{token:token,fetchPosts:fetchPosts,post:post}):null,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deletePost();},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setShowMessages(!showMessages);},children:\"Show Post Messages\"})]}):null,!post.isAuthor&&token?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setShowMessages(!showMessages);},children:\"Send a message\"}):null,showMessages?post.isAuthor?post.messages.map(function(message){return/*#__PURE__*/_jsx(Message,{message:message},message._id);}):/*#__PURE__*/_jsx(MessageForm,{token:token,id:post._id,fetchPosts:fetchPosts}):null]});};export default Post;","map":{"version":3,"sources":["/home/grem15/Code/StrangersThings/src/Post.js"],"names":["React","useState","APIFetch","Message","MessageForm","PostForm","Post","props","post","token","fetchPosts","showMessages","setShowMessages","showEdit","setShowEdit","deletePost","Promise","all","url","_id","method","then","title","author","username","description","price","location","willDeliver","createdAt","updatedAt","messages","length","isAuthor","map","message"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport APIFetch from './api';\nimport Message from './Message';\nimport MessageForm from './MessageForm';\nimport PostForm from './PostForm';\n\n\n\n\nconst Post=(props)=>\n{\n    const post=props.post;\n    const token=props.token;\n    const fetchPosts=props.fetchPosts;\n\n    const [showMessages,setShowMessages]=useState(false);\n    const [showEdit,setShowEdit]=useState(false)\n\n\n    const deletePost=()=>\n    {\n\n        Promise.all([APIFetch(\n        {\n            url:\"posts/\"+post._id+\"/\",\n            method:\"DELETE\",\n            token:token,\n        })])\n        .then(()=>\n        {\n            fetchPosts();\n        });\n    }\n\n    return <div className=\"Post\">\n        {(post.title ? <h2>{post.title}</h2> : null)}\n        {(post.author.username ? <p>Seller: {post.author.username}</p> : null)}\n        {(post.description ? <p>{post.description}</p> : null)}\n        {(post.price ? <p>Price: {post.price}</p> : null)}\n        {(post.location ? <p>Location: {post.location}</p> : <p>Location: [On Request]</p>)}\n        <p>Will Deliver: {post.willDeliver ? \"Yes\":\"No\"}</p>\n        {(post.createdAt ? <p>Created: {post.createdAt}</p> : null)}\n        {(post.updatedAt ? <p>Last updated: {post.updatedAt}</p> : null)}\n        {(post.messages.length!==0 ? <p>Messages: {post.messages.length}</p> : null)}\n        {post.isAuthor ? <>\n            <button onClick={()=>\n            {\n                setShowEdit(!showEdit);\n            }}>Edit</button>\n            {showEdit ? <PostForm token={token} fetchPosts={fetchPosts} post={post}/>:null}        \n            <button onClick={()=>\n            {\n                deletePost();\n            }}>Delete</button>\n            <button onClick={()=>\n            {\n                setShowMessages(!showMessages);\n            }}>Show Post Messages</button>\n            </>:null\n        }\n        {!post.isAuthor&&token ? \n            <button onClick={()=>\n            {\n                setShowMessages(!showMessages);\n            }}>Send a message</button>\n            :null}\n        {showMessages ? (post.isAuthor ? post.messages.map((message)=>\n            {\n                return <Message key={message._id} message={message}/>;\n            })\n            : <MessageForm token={token} id={post._id} fetchPosts={fetchPosts}/>)\n        : null}\n\n        \n\n    </div>;\n}\n\nexport default Post;"]},"metadata":{},"sourceType":"module"}